<div class="subheader p-none pl-none">
    <div class="max__w__1280 m-none">
        <div class="flex__justify__space-between">
            <div>
                <a routerLink="/coordinator/locations" class="subheader__title">
                    <img src="assets/svgs/back-arrow.svg" alt="" />
                    <span>Location Details</span>
                </a>
            </div>
            <div>
                <button class="btn font12__light-grey p-none" name="edit_location" (click)="openModal(template)">
                    <img class="mr-xs" src="assets/images/edit-icon.gif" alt="" />
                    <span class="text__deco font12__light-grey">
                        Edit Location Details</span>
                </button>
            </div>
        </div>
    </div>
</div>

<div class="max__w__1280 add__location">
    <div class="bg__white card__inside__pad box__shadow-cmn m-none">
        <div class="border__bottom__periwinkle-gray flex__justify__space-between">
            <div>
                <div class="form-group">
                    <label for="study">Location ID</label>
                    <div class="font16__grey">{{ locationBackup.customId }}</div>
                </div>
            </div>
            <div>
                <div class="form-group">
                    <label for="app">Location Name</label>
                    <div class="font16__grey">{{ locationBackup.name }}</div>
                </div>
            </div>
            <div>
                <div class="form-group">
                    <div class="active__">
                        {{ locationBackup.status == "1" ? "Active" : "DEACTIVATED" }}
                    </div>
                </div>
            </div>
        </div>
        <div class="">
            <div class="">
                <div class="form-group">
                    <label for="Location">Description</label>
                    <div class="font16__grey">
                        {{ locationBackup.description }}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="cards__list mb-xlg">
        <div class="subheader__title mb-lg mt-xlg">
            Associated Studies ( {{ locationBackup.studiesCount }} )
        </div>
        <ul *ngIf="location.studiesCount > 0" data-test="studiesCount" class="box___shadow__radius">
            <li *ngFor="let study of location.studies">{{ study }}</li>
        </ul>
    </div>
</div>

<ng-template #template>
    <div class="modal-body modal__body">
        <form #updateLocationForm="ngForm" autocomplete="off">
            <div class="row border__bottom__periwinkle-gray">
                <div class="col-xs-12 col-md-12 p-none">
                    <div class="form-group background__mystic-gray border-radius__77">
                        <label for="study">Location ID</label>
                        <input type="text" class="form-control" readonly [value]="location.customId" />
                    </div>

                </div>
                <div class="col-xs-12 col-md-12 p-none">
                    <div class="form-group">
                        <label for="app">Location Name</label>
                        <input type="text" class="form-control" id="app" placeholder="Enter Location Name"
                            [(ngModel)]="location.name" required name="name" maxlength="200" #name="ngModel" />
                    </div>
                    <div class="validation-error" *ngIf="
              name.invalid && (name.dirty || name.touched)
            ">
                        <span class="help-block with-errors error__msg" *ngIf="name.errors.required">
                            Location Name is required.
                        </span>
                        <span class="help-block with-errors error__msg" *ngIf="name.errors.maxlength">
                            Location Name exceeds max length (200 characters).
                        </span>
                        <span class="help-block with-errors error__msg"
                            *ngIf="!name.errors.required && !name.errors.maxlength">
                            Location Name is invalid.
                        </span>
                    </div>
                </div>
            </div>
            <div class="row border__bottom__periwinkle-gray">
                <div class="col-xs-12 col-md-12 p-none">
                    <div class="form-group">
                        <label for="Location">Description</label>
                        <input type="text" class="form-control" id="app" placeholder="Enter Description"
                            [(ngModel)]="location.description" required name="description" maxlength="500"
                            #description="ngModel" />
                    </div>
                    <div class="validation-error" *ngIf="
              description.invalid &&
              (description.dirty || description.touched)
            ">
                        <span class="help-block with-errors error__msg" *ngIf="description.errors.required">
                            Location Description is required.
                        </span>
                        <span class="help-block with-errors error__msg" *ngIf="description.errors.maxlength">
                            Location Description exceeds max length (500 characters).
                        </span>
                        <span class="help-block with-errors error__msg"
                            *ngIf="!description.errors.required && !description.errors.maxlength">
                            Location Description is invalid.
                        </span>
                    </div>
                </div>
            </div>

            <div class="p-xlg flex__justify__space-between">
                <div>
                    <button type="submit" class="btn bt__add mr-sm" [disabled]="!updateLocationForm.form.valid"
                        (click)="updateLocation('update'); modalRef.hide()">
                        Save
                    </button>
                    <button type="button" class="btn bt__cancel" (click)="modalRef.hide()">
                        Cancel
                    </button>
                </div>
                <div>
                    <button type="submit" [ngClass]="
              locationBackup.status == '1'
                ? 'banner__default__btn'
                : 'banner__primary__btn'
            " class="btn flex__row__reverse" (click)="updateLocation('changeStauts'); modalRef.hide()">
                        {{
              locationBackup.status == "1"
                ? "Decommission Location"
                : "Reactivate Location"
            }}
                    </button>
                </div>
            </div>
        </form>
    </div>
</ng-template>